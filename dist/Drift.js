(function(){"use strict";var t=t||{};t.scope={},t.arrayIteratorImpl=function(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}},t.arrayIterator=function(e){return{next:t.arrayIteratorImpl(e)}},t.ASSUME_ES5=!1,t.ASSUME_NO_NATIVE_MAP=!1,t.ASSUME_NO_NATIVE_SET=!1,t.SIMPLE_FROUND_POLYFILL=!1,t.ISOLATE_POLYFILLS=!1,t.FORCE_POLYFILL_PROMISE=!1,t.ENABLE_UNHANDLED_REJECTION_POLYFILL=!0,t.defineProperty=t.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,i){return t==Array.prototype||t==Object.prototype||(t[e]=i.value),t},t.getGlobal=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var e=0;e<t.length;++e){var i=t[e];if(i&&i.Math==Math)return i}throw Error("Cannot find global object")},t.global=t.getGlobal(this),t.IS_SYMBOL_NATIVE="function"==typeof Symbol&&"symbol"==typeof Symbol("x"),t.TRUST_ES6_POLYFILLS=!t.ISOLATE_POLYFILLS||t.IS_SYMBOL_NATIVE,t.polyfills={},t.propertyToPolyfillSymbol={},t.POLYFILL_PREFIX="$jscp$";t.polyfill=function(e,i,n,o){i&&(t.ISOLATE_POLYFILLS?t.polyfillIsolated(e,i,n,o):t.polyfillUnisolated(e,i,n,o))},t.polyfillUnisolated=function(e,i,n,o){for(n=t.global,e=e.split("."),o=0;o<e.length-1;o++){var s=e[o];if(!(s in n))return;n=n[s]}(i=i(o=n[e=e[e.length-1]]))!=o&&null!=i&&t.defineProperty(n,e,{configurable:!0,writable:!0,value:i})},t.polyfillIsolated=function(e,i,n,o){var s=e.split(".");e=1===s.length,o=s[0],o=!e&&o in t.polyfills?t.polyfills:t.global;for(var l=0;l<s.length-1;l++){var r=s[l];if(!(r in o))return;o=o[r]}s=s[s.length-1],null!=(i=i(n=t.IS_SYMBOL_NATIVE&&"es6"===n?o[s]:null))&&(e?t.defineProperty(t.polyfills,s,{configurable:!0,writable:!0,value:i}):i!==n&&(t.propertyToPolyfillSymbol[s]=t.IS_SYMBOL_NATIVE?t.global.Symbol(s):t.POLYFILL_PREFIX+s,s=t.propertyToPolyfillSymbol[s],t.defineProperty(o,s,{configurable:!0,writable:!0,value:i})))},t.initSymbol=function(){},t.polyfill("Symbol",(function(e){if(e)return e;var i=function(e,i){this.$jscomp$symbol$id_=e,t.defineProperty(this,"description",{configurable:!0,writable:!0,value:i})};i.prototype.toString=function(){return this.$jscomp$symbol$id_};var n=0,o=function(t){if(this instanceof o)throw new TypeError("Symbol is not a constructor");return new i("jscomp_symbol_"+(t||"")+"_"+n++,t)};return o}),"es6","es3"),t.initSymbolIterator=function(){},t.polyfill("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var i="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<i.length;n++){var o=t.global[i[n]];"function"==typeof o&&"function"!=typeof o.prototype[e]&&t.defineProperty(o.prototype,e,{configurable:!0,writable:!0,value:function(){return t.iteratorPrototype(t.arrayIteratorImpl(this))}})}return e}),"es6","es3"),t.initSymbolAsyncIterator=function(){},t.iteratorPrototype=function(t){return(t={next:t})[Symbol.iterator]=function(){return this},t},t.createTemplateTagFirstArg=function(t){return t.raw=t},t.createTemplateTagFirstArgWithRaw=function(t,e){return t.raw=e,t},function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i||4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var o in t)e.d(n,o,function(e){return t[e]}.bind(null,o));return n},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(e,i,n){function o(t){return h?t instanceof HTMLElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName}function s(t,e){e.forEach((function(e){t.classList.add(e)}))}function l(t,e){e.forEach((function(e){t.classList.remove(e)}))}function r(){throw Error("Missing parameter")}n.r(i);var h="object"==typeof HTMLElement,a=function(t){this.isShowing=!1;var e=void 0===t.namespace?null:t.namespace,i=void 0===t.zoomFactor?r():t.zoomFactor;t=void 0===t.containerEl?r():t.containerEl,this.settings={namespace:e,zoomFactor:i,containerEl:t},this.openClasses=this._buildClasses("open"),this._buildElement()};a.prototype._buildClasses=function(t){var e=["drift-"+t],i=this.settings.namespace;return i&&e.push(i+"-"+t),e},a.prototype._buildElement=function(){this.el=document.createElement("div"),s(this.el,this._buildClasses("bounding-box"))},a.prototype.show=function(t,e){this.isShowing=!0,this.settings.containerEl.appendChild(this.el);var i=this.el.style;i.width=Math.round(t/this.settings.zoomFactor)+"px",i.height=Math.round(e/this.settings.zoomFactor)+"px",s(this.el,this.openClasses)},a.prototype.hide=function(){this.isShowing&&this.settings.containerEl.removeChild(this.el),this.isShowing=!1,l(this.el,this.openClasses)},a.prototype.setPosition=function(t,e,i){var n=window.pageXOffset,o=window.pageYOffset;t=i.left+t*i.width-this.el.clientWidth/2+n,e=i.top+e*i.height-this.el.clientHeight/2+o,t<i.left+n?t=i.left+n:t+this.el.clientWidth>i.left+i.width+n&&(t=i.left+i.width-this.el.clientWidth+n),e<i.top+o?e=i.top+o:e+this.el.clientHeight>i.top+i.height+o&&(e=i.top+i.height-this.el.clientHeight+o),this.el.style.left=t+"px",this.el.style.top=e+"px"};var d=function(t){t=void 0===t?{}:t,this._show=this._show.bind(this),this._hide=this._hide.bind(this),this._handleEntry=this._handleEntry.bind(this),this._handleMovement=this._handleMovement.bind(this);var e=t;t=void 0===e.el?r():e.el;var i=void 0===e.zoomPane?r():e.zoomPane,n=void 0===e.sourceAttribute?r():e.sourceAttribute,o=void 0===e.handleTouch?r():e.handleTouch,s=void 0===e.onShow?null:e.onShow,l=void 0===e.onHide?null:e.onHide,h=void 0===e.hoverDelay?0:e.hoverDelay,d=void 0===e.touchDelay?0:e.touchDelay,u=void 0===e.hoverBoundingBox?r():e.hoverBoundingBox,c=void 0===e.touchBoundingBox?r():e.touchBoundingBox,p=void 0===e.namespace?null:e.namespace,g=void 0===e.zoomFactor?r():e.zoomFactor;e=void 0===e.boundingBoxContainer?r():e.boundingBoxContainer,this.settings={el:t,zoomPane:i,sourceAttribute:n,handleTouch:o,onShow:s,onHide:l,hoverDelay:h,touchDelay:d,hoverBoundingBox:u,touchBoundingBox:c,namespace:p,zoomFactor:g,boundingBoxContainer:e},(this.settings.hoverBoundingBox||this.settings.touchBoundingBox)&&(this.boundingBox=new a({namespace:this.settings.namespace,zoomFactor:this.settings.zoomFactor,containerEl:this.settings.boundingBoxContainer})),this.enabled=!0,this._bindEvents()};d.prototype._preventDefault=function(t){t.preventDefault()},d.prototype._preventDefaultAllowTouchScroll=function(t){this.settings.touchDelay&&this._isTouchEvent(t)&&!this.isShowing||t.preventDefault()},d.prototype._isTouchEvent=function(t){return!!t.touches},d.prototype._bindEvents=function(){this.settings.el.addEventListener("mouseenter",this._handleEntry,!1),this.settings.el.addEventListener("mouseleave",this._hide,!1),this.settings.el.addEventListener("mousemove",this._handleMovement,!1),this.settings.handleTouch?(this.settings.el.addEventListener("touchstart",this._handleEntry,!1),this.settings.el.addEventListener("touchend",this._hide,!1),this.settings.el.addEventListener("touchmove",this._handleMovement,!1)):(this.settings.el.addEventListener("touchstart",this._preventDefault,!1),this.settings.el.addEventListener("touchend",this._preventDefault,!1),this.settings.el.addEventListener("touchmove",this._preventDefault,!1))},d.prototype._unbindEvents=function(){this.settings.el.removeEventListener("mouseenter",this._handleEntry,!1),this.settings.el.removeEventListener("mouseleave",this._hide,!1),this.settings.el.removeEventListener("mousemove",this._handleMovement,!1),this.settings.handleTouch?(this.settings.el.removeEventListener("touchstart",this._handleEntry,!1),this.settings.el.removeEventListener("touchend",this._hide,!1),this.settings.el.removeEventListener("touchmove",this._handleMovement,!1)):(this.settings.el.removeEventListener("touchstart",this._preventDefault,!1),this.settings.el.removeEventListener("touchend",this._preventDefault,!1),this.settings.el.removeEventListener("touchmove",this._preventDefault,!1))},d.prototype._handleEntry=function(t){this._preventDefaultAllowTouchScroll(t),this._lastMovement=t,"mouseenter"==t.type&&this.settings.hoverDelay?this.entryTimeout=setTimeout(this._show,this.settings.hoverDelay):this.settings.touchDelay?this.entryTimeout=setTimeout(this._show,this.settings.touchDelay):this._show()},d.prototype._show=function(){if(this.enabled){var t=this.settings.onShow;t&&"function"==typeof t&&t(),this.settings.zoomPane.show(this.settings.el.getAttribute(this.settings.sourceAttribute),this.settings.el.clientWidth,this.settings.el.clientHeight),this._lastMovement&&((t=this._lastMovement.touches)&&this.settings.touchBoundingBox||!t&&this.settings.hoverBoundingBox)&&this.boundingBox.show(this.settings.zoomPane.el.clientWidth,this.settings.zoomPane.el.clientHeight),this._handleMovement()}},d.prototype._hide=function(t){t&&this._preventDefaultAllowTouchScroll(t),this._lastMovement=null,this.entryTimeout&&clearTimeout(this.entryTimeout),this.boundingBox&&this.boundingBox.hide(),(t=this.settings.onHide)&&"function"==typeof t&&t(),this.settings.zoomPane.hide()},d.prototype._handleMovement=function(t){if(t)this._preventDefaultAllowTouchScroll(t),this._lastMovement=t;else{if(!this._lastMovement)return;t=this._lastMovement}if(t.touches)var e=(t=t.touches[0]).clientX,i=t.clientY;else e=t.clientX,i=t.clientY;e=(e-(t=this.settings.el.getBoundingClientRect()).left)/this.settings.el.clientWidth,i=(i-t.top)/this.settings.el.clientHeight,this.boundingBox&&this.boundingBox.setPosition(e,i,t),this.settings.zoomPane.setPosition(e,i,t)},t.global.Object.defineProperties(d.prototype,{isShowing:{configurable:!0,enumerable:!0,get:function(){return this.settings.zoomPane.isShowing}}});var u=function(t){if(t=void 0===t?{}:t,this.HAS_ANIMATION=!1,"undefined"!=typeof document){var e=document.createElement("div").style;this.HAS_ANIMATION="animation"in e||"webkitAnimation"in e}this._completeShow=this._completeShow.bind(this),this._completeHide=this._completeHide.bind(this),this._handleLoad=this._handleLoad.bind(this),this.isShowing=!1,e=void 0===t.container?null:t.container;var i=void 0===t.zoomFactor?r():t.zoomFactor,n=void 0===t.inline?r():t.inline,o=void 0===t.namespace?null:t.namespace,s=void 0===t.showWhitespaceAtEdges?r():t.showWhitespaceAtEdges,l=void 0===t.containInline?r():t.containInline;this.settings={container:e,zoomFactor:i,inline:n,namespace:o,showWhitespaceAtEdges:s,containInline:l,inlineOffsetX:void 0===t.inlineOffsetX?0:t.inlineOffsetX,inlineOffsetY:void 0===t.inlineOffsetY?0:t.inlineOffsetY,inlineContainer:void 0===t.inlineContainer?document.body:t.inlineContainer},this.openClasses=this._buildClasses("open"),this.openingClasses=this._buildClasses("opening"),this.closingClasses=this._buildClasses("closing"),this.inlineClasses=this._buildClasses("inline"),this.loadingClasses=this._buildClasses("loading"),this._buildElement()};u.prototype._buildClasses=function(t){var e=["drift-"+t],i=this.settings.namespace;return i&&e.push(i+"-"+t),e},u.prototype._buildElement=function(){this.el=document.createElement("div"),s(this.el,this._buildClasses("zoom-pane"));var t=document.createElement("div");s(t,this._buildClasses("zoom-pane-loader")),this.el.appendChild(t),this.imgEl=document.createElement("img"),this.el.appendChild(this.imgEl)},u.prototype._setImageURL=function(t){this.imgEl.setAttribute("src",t)},u.prototype._setImageSize=function(t,e){this.imgEl.style.width=t*this.settings.zoomFactor+"px",this.imgEl.style.height=e*this.settings.zoomFactor+"px"},u.prototype.setPosition=function(t,e,i){var n=this.imgEl.offsetWidth,o=this.imgEl.offsetHeight,s=this.el.offsetWidth,l=this.el.offsetHeight,r=s/2-n*t,h=l/2-o*e,a=s-n,d=l-o,u=0<a,c=0<d;o=u?a/2:0,n=c?d/2:0,a=u?a/2:a,d=c?d/2:d,this.el.parentElement===this.settings.inlineContainer&&(c=window.pageXOffset,u=window.pageYOffset,t=i.left+t*i.width-s/2+this.settings.inlineOffsetX+c,e=i.top+e*i.height-l/2+this.settings.inlineOffsetY+u,this.settings.containInline&&(t<i.left+c?t=i.left+c:t+s>i.left+i.width+c&&(t=i.left+i.width-s+c),e<i.top+u?e=i.top+u:e+l>i.top+i.height+u&&(e=i.top+i.height-l+u)),this.el.style.left=t+"px",this.el.style.top=e+"px"),this.settings.showWhitespaceAtEdges||(r>o?r=o:r<a&&(r=a),h>n?h=n:h<d&&(h=d)),this.imgEl.style.transform="translate("+r+"px, "+h+"px)",this.imgEl.style.webkitTransform="translate("+r+"px, "+h+"px)"},u.prototype._removeListenersAndResetClasses=function(){this.el.removeEventListener("animationend",this._completeShow,!1),this.el.removeEventListener("animationend",this._completeHide,!1),this.el.removeEventListener("webkitAnimationEnd",this._completeShow,!1),this.el.removeEventListener("webkitAnimationEnd",this._completeHide,!1),l(this.el,this.openClasses),l(this.el,this.closingClasses)},u.prototype.show=function(t,e,i){this._removeListenersAndResetClasses(),this.isShowing=!0,s(this.el,this.openClasses),this.imgEl.getAttribute("src")!=t&&(s(this.el,this.loadingClasses),this.imgEl.addEventListener("load",this._handleLoad,!1),this._setImageURL(t)),this._setImageSize(e,i),this._isInline?this._showInline():this._showInContainer(),this.HAS_ANIMATION&&(this.el.addEventListener("animationend",this._completeShow,!1),this.el.addEventListener("webkitAnimationEnd",this._completeShow,!1),s(this.el,this.openingClasses))},u.prototype._showInline=function(){this.settings.inlineContainer.appendChild(this.el),s(this.el,this.inlineClasses)},u.prototype._showInContainer=function(){this.settings.container.appendChild(this.el)},u.prototype.hide=function(){this._removeListenersAndResetClasses(),this.isShowing=!1,this.HAS_ANIMATION?(this.el.addEventListener("animationend",this._completeHide,!1),this.el.addEventListener("webkitAnimationEnd",this._completeHide,!1),s(this.el,this.closingClasses)):(l(this.el,this.openClasses),l(this.el,this.inlineClasses))},u.prototype._completeShow=function(){this.el.removeEventListener("animationend",this._completeShow,!1),this.el.removeEventListener("webkitAnimationEnd",this._completeShow,!1),l(this.el,this.openingClasses)},u.prototype._completeHide=function(){this.el.removeEventListener("animationend",this._completeHide,!1),this.el.removeEventListener("webkitAnimationEnd",this._completeHide,!1),l(this.el,this.openClasses),l(this.el,this.closingClasses),l(this.el,this.inlineClasses),this.el.setAttribute("style",""),this.el.parentElement===this.settings.container?this.settings.container.removeChild(this.el):this.el.parentElement===this.settings.inlineContainer&&this.settings.inlineContainer.removeChild(this.el)},u.prototype._handleLoad=function(){this.imgEl.removeEventListener("load",this._handleLoad,!1),l(this.el,this.loadingClasses)},t.global.Object.defineProperties(u.prototype,{_isInline:{configurable:!0,enumerable:!0,get:function(){var t=this.settings.inline;return!0===t||"number"==typeof t&&window.innerWidth<=t}}}),(e=function(t,e){if(e=void 0===e?{}:e,this.VERSION="1.4.0",this.triggerEl=t,this.destroy=this.destroy.bind(this),!o(this.triggerEl))throw new TypeError("`new Drift` requires a DOM element as its first argument.");t=e.namespace||null;var i=e.showWhitespaceAtEdges||!1,n=e.containInline||!1,s=e.inlineOffsetX||0,l=e.inlineOffsetY||0,r=e.inlineContainer||document.body,h=e.sourceAttribute||"data-zoom",a=e.zoomFactor||3,d=void 0===e.paneContainer?document.body:e.paneContainer,u=e.inlinePane||375,c=!("handleTouch"in e)||!!e.handleTouch,p=e.onShow||null,g=e.onHide||null,f=!("injectBaseStyles"in e)||!!e.injectBaseStyles,m=e.hoverDelay||0,y=e.touchDelay||0,v=e.hoverBoundingBox||!1,b=e.touchBoundingBox||!1;if(e=e.boundingBoxContainer||document.body,!0!==u&&!o(d))throw new TypeError("`paneContainer` must be a DOM element when `inlinePane !== true`");if(!o(r))throw new TypeError("`inlineContainer` must be a DOM element");this.settings={namespace:t,showWhitespaceAtEdges:i,containInline:n,inlineOffsetX:s,inlineOffsetY:l,inlineContainer:r,sourceAttribute:h,zoomFactor:a,paneContainer:d,inlinePane:u,handleTouch:c,onShow:p,onHide:g,injectBaseStyles:f,hoverDelay:m,touchDelay:y,hoverBoundingBox:v,touchBoundingBox:b,boundingBoxContainer:e},this.settings.injectBaseStyles&&(document.querySelector(".drift-base-styles")||((e=document.createElement("style")).type="text/css",e.classList.add("drift-base-styles"),e.appendChild(document.createTextNode(".drift-bounding-box,.drift-zoom-pane{position:absolute;pointer-events:none}@keyframes noop{0%{zoom:1}}@-webkit-keyframes noop{0%{zoom:1}}.drift-zoom-pane.drift-open{display:block}.drift-zoom-pane.drift-closing,.drift-zoom-pane.drift-opening{animation:noop 1ms;-webkit-animation:noop 1ms}.drift-zoom-pane{overflow:hidden;width:100%;height:100%;top:0;left:0}.drift-zoom-pane-loader{display:none}.drift-zoom-pane img{position:absolute;display:block;max-width:none;max-height:none}")),(t=document.head).insertBefore(e,t.firstChild))),this._buildZoomPane(),this._buildTrigger()}).prototype._buildZoomPane=function(){this.zoomPane=new u({container:this.settings.paneContainer,zoomFactor:this.settings.zoomFactor,showWhitespaceAtEdges:this.settings.showWhitespaceAtEdges,containInline:this.settings.containInline,inline:this.settings.inlinePane,namespace:this.settings.namespace,inlineOffsetX:this.settings.inlineOffsetX,inlineOffsetY:this.settings.inlineOffsetY,inlineContainer:this.settings.inlineContainer})},e.prototype._buildTrigger=function(){this.trigger=new d({el:this.triggerEl,zoomPane:this.zoomPane,handleTouch:this.settings.handleTouch,onShow:this.settings.onShow,onHide:this.settings.onHide,sourceAttribute:this.settings.sourceAttribute,hoverDelay:this.settings.hoverDelay,touchDelay:this.settings.touchDelay,hoverBoundingBox:this.settings.hoverBoundingBox,touchBoundingBox:this.settings.touchBoundingBox,namespace:this.settings.namespace,zoomFactor:this.settings.zoomFactor,boundingBoxContainer:this.settings.boundingBoxContainer})},e.prototype.setZoomImageURL=function(t){this.zoomPane._setImageURL(t)},e.prototype.disable=function(){this.trigger.enabled=!1},e.prototype.enable=function(){this.trigger.enabled=!0},e.prototype.destroy=function(){this.trigger._hide(),this.trigger._unbindEvents()},t.global.Object.defineProperties(e.prototype,{isShowing:{configurable:!0,enumerable:!0,get:function(){return this.zoomPane.isShowing}},zoomFactor:{configurable:!0,enumerable:!0,get:function(){return this.settings.zoomFactor},set:function(t){this.settings.zoomFactor=t,this.zoomPane.settings.zoomFactor=t,this.trigger.settings.zoomFactor=t,this.boundingBox.settings.zoomFactor=t}}}),Object.defineProperty(e.prototype,"isShowing",{get:function(){return this.isShowing}}),Object.defineProperty(e.prototype,"zoomFactor",{get:function(){return this.zoomFactor},set:function(t){this.zoomFactor=t}}),e.prototype.setZoomImageURL=e.prototype.setZoomImageURL,e.prototype.disable=e.prototype.disable,e.prototype.enable=e.prototype.enable,e.prototype.destroy=e.prototype.destroy,window.Drift=e}])}).call(this||window);
//# sourceMappingURL=Drift.min.js.map